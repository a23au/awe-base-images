{
  "SchemaVersion": 2,
  "ArtifactName": "jercle/awe-httpd-base",
  "ArtifactType": "container_image",
  "Metadata": {
    "OS": {
      "Family": "alpine",
      "Name": "3.17.1"
    },
    "ImageID": "sha256:7a2fae950148770012a8b724f5991987c28539da1446b99e1768cefff2335db5",
    "DiffIDs": [
      "sha256:8e012198eea15b2554b07014081c85fec4967a1b9cc4b65bd9a4bce3ae1c0c88",
      "sha256:76e789f8b8e612e9803b0fe3bd0b43add3579a2a3cc92b341027c1a9a7624681",
      "sha256:fd423dbc9ddc3140399bfb4dcd4610c96a5ee2d95acf8e155db7cf51f1f9e652",
      "sha256:105e83b9f61622fb3a91ce62e80d15e79b03fd2d697e47b12adb5f66f1b2c9ec",
      "sha256:1f5dc4f181643a933ada1c79e1bfc215b1c3ec1c1bb1d315dd712d0946425bab",
      "sha256:6bae15b283831aa768131b1a8c929bde31426f500ffcb660de5e0b2f2d1c4a81",
      "sha256:20ce107a18bfeeaf26339057188a67a153c71362e5651c9ca0799019cfeec15f",
      "sha256:4dbbaccaf225be318a49990b2dda274a71dc9d1d5e9543379607b99db8e8e46c"
    ],
    "RepoTags": [
      "jercle/awe-httpd-base:1.0.12",
      "jercle/awe-httpd-base:latest"
    ],
    "ImageConfig": {
      "architecture": "amd64",
      "created": "2023-02-22T03:42:45.198320256Z",
      "history": [
        {
          "created": "2023-01-09T17:05:20Z",
          "created_by": "/bin/sh -c #(nop) ADD file:e4d600fc4c9c293efe360be7b30ee96579925d1b4634c94332e2ec73f7d8eca1 in / "
        },
        {
          "created": "2023-01-09T17:05:20Z",
          "created_by": "/bin/sh -c #(nop)  CMD [\"/bin/sh\"]",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:25:40Z",
          "created_by": "/bin/sh -c set -x \t\u0026\u0026 adduser -u 82 -D -S -G www-data www-data"
        },
        {
          "created": "2023-01-09T18:25:40Z",
          "created_by": "/bin/sh -c #(nop)  ENV HTTPD_PREFIX=/usr/local/apache2",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:25:41Z",
          "created_by": "/bin/sh -c #(nop)  ENV PATH=/usr/local/apache2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:25:41Z",
          "created_by": "/bin/sh -c mkdir -p \"$HTTPD_PREFIX\" \t\u0026\u0026 chown www-data:www-data \"$HTTPD_PREFIX\""
        },
        {
          "created": "2023-01-09T18:25:41Z",
          "created_by": "/bin/sh -c #(nop) WORKDIR /usr/local/apache2",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:25:43Z",
          "created_by": "/bin/sh -c set -eux; \tapk add --no-cache \t\tapr \t\tapr-util \t\tapr-util-ldap \t\tca-certificates \t\tperl \t;"
        },
        {
          "created": "2023-01-09T18:25:43Z",
          "created_by": "/bin/sh -c #(nop)  ENV HTTPD_VERSION=2.4.54",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:25:44Z",
          "created_by": "/bin/sh -c #(nop)  ENV HTTPD_SHA256=eb397feeefccaf254f8d45de3768d9d68e8e73851c49afd5b7176d1ecf80c340",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:25:44Z",
          "created_by": "/bin/sh -c #(nop)  ENV HTTPD_PATCHES=",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:26:56Z",
          "created_by": "/bin/sh -c set -eux; \t\tapk add --no-cache --virtual .build-deps \t\tapr-dev \t\tapr-util-dev \t\tcoreutils \t\tdpkg-dev dpkg \t\tgcc \t\tgnupg \t\tlibc-dev \t\tcurl-dev \t\tjansson-dev \t\tlibxml2-dev \t\tlua-dev \t\tmake \t\tnghttp2-dev \t\topenssl \t\topenssl-dev \t\tpcre-dev \t\ttar \t\tzlib-dev \t\tbrotli-dev \t; \t\tddist() { \t\tlocal f=\"$1\"; shift; \t\tlocal distFile=\"$1\"; shift; \t\tlocal success=; \t\tlocal distUrl=; \t\tfor distUrl in \t\t\t'https://www.apache.org/dyn/closer.cgi?action=download\u0026filename=' \t\t\thttps://downloads.apache.org/ \t\t\thttps://www-us.apache.org/dist/ \t\t\thttps://www.apache.org/dist/ \t\t\thttps://archive.apache.org/dist/ \t\t; do \t\t\tif wget -O \"$f\" \"$distUrl$distFile\" \u0026\u0026 [ -s \"$f\" ]; then \t\t\t\tsuccess=1; \t\t\t\tbreak; \t\t\tfi; \t\tdone; \t\t[ -n \"$success\" ]; \t}; \t\tddist 'httpd.tar.bz2' \"httpd/httpd-$HTTPD_VERSION.tar.bz2\"; \techo \"$HTTPD_SHA256 *httpd.tar.bz2\" | sha256sum -c -; \t\tddist 'httpd.tar.bz2.asc' \"httpd/httpd-$HTTPD_VERSION.tar.bz2.asc\"; \texport GNUPGHOME=\"$(mktemp -d)\"; \tfor key in \t\tDE29FB3971E71543FD2DC049508EAEC5302DA568 \t\t13155B0E9E634F42BF6C163FDDBA64BA2C312D2F \t\t8B39757B1D8A994DF2433ED58B3A601F08C975E5 \t\t31EE1A81B8D066548156D37B7D6DBFD1F08E012A \t\tA10208FEC3152DD7C0C9B59B361522D782AB7BD1 \t\t3DE024AFDA7A4B15CB6C14410F81AA8AB0D5F771 \t\tEB138C6AF0FC691001B16D93344A844D751D7F27 \t\tCBA5A7C21EC143314C41393E5B968010E04F9A89 \t\t3C016F2B764621BB549C66B516A96495E2226795 \t\t937FB3994A242BA9BF49E93021454AF0CC8B0F7E \t\tEAD1359A4C0F2D37472AAF28F55DF0293A4E7AC9 \t\t4C1EADADB4EF5007579C919C6635B6C0DE885DD3 \t\t01E475360FCCF1D0F24B9D145D414AE1E005C9CB \t\t92CCEF0AA7DD46AC3A0F498BCA6939748103A37E \t\tD395C7573A68B9796D38C258153FA0CD75A67692 \t\tFA39B617B61493FD283503E7EED1EA392261D073 \t\t984FB3350C1D5C7A3282255BB31B213D208F5064 \t\tFE7A49DAA875E890B4167F76CCB2EB46E76CF6D0 \t\t39F6691A0ECF0C50E8BB849CF78875F642721F00 \t\t29A2BA848177B73878277FA475CAA2A3F39B3750 \t\t120A8667241AEDD4A78B46104C042818311A3DE5 \t\t453510BDA6C5855624E009236D0BC73A40581837 \t\t0DE5C55C6BF3B2352DABB89E13249B4FEC88A0BF \t\t7CDBED100806552182F98844E8E7E00B4DAA1988 \t\tA8BA9617EF3BCCAC3B29B869EDB105896F9522D8 \t\t3E6AC004854F3A7F03566B592FF06894E55B0D0E \t\t5B5181C2C0AB13E59DA3F7A3EC582EB639FF092C \t\tA93D62ECC3C8EA12DB220EC934EA76E6791485A8 \t\t65B2D44FE74BD5E3DE3AC3F082781DE46D5954FA \t\t8935926745E1CE7E3ED748F6EC99EE267EB5F61A \t\tE3480043595621FE56105F112AB12A7ADC55C003 \t\t93525CFCF6FDFFB3FD9700DD5A4B10AE43B56A27 \t\tC55AB7B9139EB2263CD1AABC19B033D1760C227B \t\t26F51EF9A82F4ACB43F1903ED377C9E7D1944C66 \t; do \t\tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"; \tdone; \tgpg --batch --verify httpd.tar.bz2.asc httpd.tar.bz2; \tcommand -v gpgconf \u0026\u0026 gpgconf --kill all || :; \trm -rf \"$GNUPGHOME\" httpd.tar.bz2.asc; \t\tmkdir -p src; \ttar -xf httpd.tar.bz2 -C src --strip-components=1; \trm httpd.tar.bz2; \tcd src; \t\tpatches() { \t\twhile [ \"$#\" -gt 0 ]; do \t\t\tlocal patchFile=\"$1\"; shift; \t\t\tlocal patchSha256=\"$1\"; shift; \t\t\tddist \"$patchFile\" \"httpd/patches/apply_to_$HTTPD_VERSION/$patchFile\"; \t\t\techo \"$patchSha256 *$patchFile\" | sha256sum -c -; \t\t\tpatch -p0 \u003c \"$patchFile\"; \t\t\trm -f \"$patchFile\"; \t\tdone; \t}; \tpatches $HTTPD_PATCHES; \t\tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \t./configure \t\t--build=\"$gnuArch\" \t\t--prefix=\"$HTTPD_PREFIX\" \t\t--enable-mods-shared=reallyall \t\t--enable-mpms-shared=all \t; \tmake -j \"$(nproc)\"; \tmake install; \t\tcd ..; \trm -r src man manual; \t\tsed -ri \t\t-e 's!^(\\s*CustomLog)\\s+\\S+!\\1 /proc/self/fd/1!g' \t\t-e 's!^(\\s*ErrorLog)\\s+\\S+!\\1 /proc/self/fd/2!g' \t\t-e 's!^(\\s*TransferLog)\\s+\\S+!\\1 /proc/self/fd/1!g' \t\t-e 's!^(\\s*User)\\s+daemon\\s*$!\\1 www-data!g' \t\t-e 's!^(\\s*Group)\\s+daemon\\s*$!\\1 www-data!g' \t\t\"$HTTPD_PREFIX/conf/httpd.conf\" \t\t\"$HTTPD_PREFIX/conf/extra/httpd-ssl.conf\" \t; \tgrep -E '^\\s*User www-data$' \"$HTTPD_PREFIX/conf/httpd.conf\"; \tgrep -E '^\\s*Group www-data$' \"$HTTPD_PREFIX/conf/httpd.conf\"; \t\tdeps=\"$( \t\tscanelf --needed --nobanner --format '%n#p' --recursive /usr/local \t\t\t| tr ',' '\\n' \t\t\t| sort -u \t\t\t| awk 'system(\"[ -e /usr/local/lib/\" $1 \" ]\") == 0 { next } { print \"so:\" $1 }' \t)\"; \tapk add --no-network --virtual .httpd-so-deps $deps; \tapk del --no-network .build-deps; \t\thttpd -v"
        },
        {
          "created": "2023-01-09T18:26:56Z",
          "created_by": "/bin/sh -c #(nop)  STOPSIGNAL SIGWINCH",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:26:56Z",
          "created_by": "/bin/sh -c #(nop) COPY file:c432ff61c4993ecdef4786f48d91a96f8f0707f6179816ccb98db661bfb96b90 in /usr/local/bin/ "
        },
        {
          "created": "2023-01-09T18:26:56Z",
          "created_by": "/bin/sh -c #(nop)  EXPOSE 80",
          "empty_layer": true
        },
        {
          "created": "2023-01-09T18:26:56Z",
          "created_by": "/bin/sh -c #(nop)  CMD [\"httpd-foreground\"]",
          "empty_layer": true
        },
        {
          "created": "2023-02-22T03:42:45Z",
          "created_by": "LABEL project=awe-dmz-migration",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2023-02-22T03:42:45Z",
          "created_by": "LABEL type=base",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2023-02-22T03:42:45Z",
          "created_by": "RUN /bin/sh -c apk upgrade --no-cache \u0026\u0026   rm -rf /usr/local/apache2/cgi-bin/ \u0026\u0026   mkdir /usr/local/apache2/cgi-bin/ \u0026\u0026   mkdir /app \u0026\u0026   chown -R www-data:www-data   /usr/local/apache2/logs   /usr/local/apache2/cgi-bin/   /app \u0026\u0026   chmod -R 500 /usr/local/apache2/cgi-bin/ \u0026\u0026   chmod -R 700 /app   /usr/local/apache2/logs \u0026\u0026   rm /usr/local/apache2/htdocs/index.html # buildkit",
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "created": "2023-02-22T03:42:45Z",
          "created_by": "COPY ./linux/awe-httpd-base/httpd.conf /usr/local/apache2/conf/httpd.conf # buildkit",
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "created": "2023-02-22T03:42:45Z",
          "created_by": "USER www-data",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2023-02-22T03:42:45Z",
          "created_by": "EXPOSE map[8080/tcp:{}]",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        }
      ],
      "os": "linux",
      "rootfs": {
        "type": "layers",
        "diff_ids": [
          "sha256:8e012198eea15b2554b07014081c85fec4967a1b9cc4b65bd9a4bce3ae1c0c88",
          "sha256:76e789f8b8e612e9803b0fe3bd0b43add3579a2a3cc92b341027c1a9a7624681",
          "sha256:fd423dbc9ddc3140399bfb4dcd4610c96a5ee2d95acf8e155db7cf51f1f9e652",
          "sha256:105e83b9f61622fb3a91ce62e80d15e79b03fd2d697e47b12adb5f66f1b2c9ec",
          "sha256:1f5dc4f181643a933ada1c79e1bfc215b1c3ec1c1bb1d315dd712d0946425bab",
          "sha256:6bae15b283831aa768131b1a8c929bde31426f500ffcb660de5e0b2f2d1c4a81",
          "sha256:20ce107a18bfeeaf26339057188a67a153c71362e5651c9ca0799019cfeec15f",
          "sha256:4dbbaccaf225be318a49990b2dda274a71dc9d1d5e9543379607b99db8e8e46c"
        ]
      },
      "config": {
        "Cmd": [
          "httpd-foreground"
        ],
        "Env": [
          "PATH=/usr/local/apache2/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
          "HTTPD_PREFIX=/usr/local/apache2",
          "HTTPD_VERSION=2.4.54",
          "HTTPD_SHA256=eb397feeefccaf254f8d45de3768d9d68e8e73851c49afd5b7176d1ecf80c340",
          "HTTPD_PATCHES="
        ],
        "Labels": {
          "project": "awe-dmz-migration",
          "type": "base"
        },
        "User": "www-data",
        "WorkingDir": "/usr/local/apache2",
        "StopSignal": "SIGWINCH"
      }
    }
  },
  "Results": [
    {
      "Target": "jercle/awe-httpd-base (alpine 3.17.1)",
      "Class": "os-pkgs",
      "Type": "alpine"
    }
  ]
}
